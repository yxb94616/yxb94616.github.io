<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width"/><link rel="icon" href="/favicon.ico"/><meta name="description" content="åŸºäºnext.jsæ­å»ºçš„åšå®¢ç³»ç»Ÿï¼Œä½¿ç”¨github pageså’ŒgitHub actionsè¿›è¡Œéƒ¨ç½²"/><meta property="og:image" content="https://og-image.vercel.app/Blog%20system%20built%20by%20Next.js.png?theme=light&amp;md=0&amp;fontSize=75px&amp;images=https%3A%2F%2Fassets.vercel.com%2Fimage%2Fupload%2Ffront%2Fassets%2Fdesign%2Fnextjs-black-logo.svg"/><meta name="og:title" content="Three Life&#x27;s blogging system"/><meta name="twitter:card" content="summary_large_image"/><link rel="preload" as="image" href="/images/profile.jpg"/><title>Nuxt3+Tailwindcss implements dark mode switching</title><meta name="next-head-count" content="9"/><link rel="preload" href="/_next/static/css/0275f6d90e7ad339.css" as="style"/><link rel="stylesheet" href="/_next/static/css/0275f6d90e7ad339.css" data-n-g=""/><link rel="preload" href="/_next/static/css/c39f9723b4064ac0.css" as="style"/><link rel="stylesheet" href="/_next/static/css/c39f9723b4064ac0.css" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script src="/_next/static/chunks/webpack-7ee66019f7f6d30f.js" defer=""></script><script src="/_next/static/chunks/framework-0c60727b75b88c05.js" defer=""></script><script src="/_next/static/chunks/main-94d2b1ee1021a126.js" defer=""></script><script src="/_next/static/chunks/pages/_app-a1d1ed1f972287fd.js" defer=""></script><script src="/_next/static/chunks/562-b4e559111a58ff41.js" defer=""></script><script src="/_next/static/chunks/pages/posts/%5Bid%5D-dcd1d88a30994957.js" defer=""></script><script src="/_next/static/2JG6mlIUNmPBlo9NKBYU6/_buildManifest.js" defer=""></script><script src="/_next/static/2JG6mlIUNmPBlo9NKBYU6/_ssgManifest.js" defer=""></script></head><body><div id="__next" data-reactroot=""><div class="layout_container__fbLkO"><header class="layout_header__kY0Lt"><a href="/"><span style="box-sizing:border-box;display:inline-block;overflow:hidden;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;position:relative;max-width:100%"><span style="box-sizing:border-box;display:block;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;max-width:100%"><img style="display:block;max-width:100%;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0" alt="" aria-hidden="true" src="data:image/svg+xml,%3csvg%20xmlns=%27http://www.w3.org/2000/svg%27%20version=%271.1%27%20width=%27108%27%20height=%27108%27/%3e"/></span><img alt="Three Life" src="/images/profile.jpg" decoding="async" data-nimg="intrinsic" class="utils_borderCircle__s2nTm" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%"/></span></a><h2 class="utils_headingLg__5535D"><a class="utils_colorInherit__mSH_x" href="/">Three Life</a></h2></header><main><article><h1 class="utils_headingXl__u25Y2">Nuxt3+Tailwindcss implements dark mode switching</h1><div class="utils_lightText__eUzGY"><time dateTime="2023-05-24">May 24, 2023</time></div><div><p>æœ€è¿‘æ˜é‡‘ç½‘ç«™ä¸Šçº¿äº†æ·±è‰²æ¨¡å¼ï¼Œçœ‹ jym éƒ½æŒºé’çæ·±è‰²æ¨¡å¼ï¼Œæƒ³ç€æˆ‘ä¹‹å‰ä¹Ÿå®ç°è¿‡æ·±è‰²æ¨¡å¼çš„åˆ‡æ¢ï¼Œä¸è¿‡æ˜¯åœ¨ä½¿ç”¨ <code>VUE SPA</code> åšçš„ç½‘ç«™ä¸Šå®ç°çš„ï¼Œè€Œæ˜é‡‘ç½‘ç«™ä½¿ç”¨çš„æ˜¯ <code>VUE SSR</code> æ¡†æ¶ <code>Nuxt</code>ï¼Œæˆ‘æƒ³ç€å®ç°åŸç†éƒ½æ˜¯å¤§åŒå°å¼‚ï¼Œé‚£æˆ‘ä»¬ä¹Ÿä½¿ç”¨ <code>Nuxt</code> æ¥å®ç°ä¸€ä¸‹æ·±è‰²æ¨¡å¼çš„åˆ‡æ¢è¯•è¯•ã€‚</p>
<h2>æ·±è‰²æ¨¡å¼åˆ‡æ¢åŸç†ä¹‹ä¸€</h2>
<p>ä¸ºä»€ä¹ˆæ˜¯åŸç†ä¹‹ä¸€ï¼Œæ˜¯å› ä¸ºå®ç°æ·±è‰²æ¨¡å¼æœ‰å¤šç§æ–¹å¼ï¼Œæˆ‘å°è¯•çš„æ˜¯é€šè¿‡ <code>css class</code> åˆ‡æ¢æ¥æ§åˆ¶æ·±è‰²æ¨¡å¼åˆ‡æ¢ã€‚
å¤§æ¦‚æ˜¯è¿™ä¹ˆä¸ªåŸç†ï¼š</p>
<ul>
<li>
<p>å®šä¹‰ä¸¤å¥—æ ·å¼ï¼šä½ éœ€è¦ä¸ºæ·±è‰²æ¨¡å¼å’Œæµ…è‰²æ¨¡å¼åˆ†åˆ«å®šä¹‰ä¸¤å¥—æ ·å¼</p>
</li>
<li>
<p>åˆ‡æ¢ CSS ç±»ï¼šé€šè¿‡ JS åŠ¨æ€åœ°åˆ‡æ¢ç‰¹å®šçš„ CSS ç±»</p>
</li>
<li>
<p>CSS æ ·å¼ä¼˜å…ˆçº§ï¼šç¡®ä¿åœ¨ CSS ä¸­æ­£ç¡®è®¾ç½®æ·±è‰²æ¨¡å¼å’Œæµ…è‰²æ¨¡å¼çš„æ ·å¼ä¼˜å…ˆçº§ã€‚ä¸ºäº†ç¡®ä¿æ ·å¼æ­£ç¡®åº”ç”¨ï¼Œä½ å¯ä»¥ä½¿ç”¨åˆé€‚çš„ CSS é€‰æ‹©å™¨ï¼Œä¾‹å¦‚ä½¿ç”¨ .dark æˆ– .light ç±»æ¥é€‰æ‹©å¯¹åº”çš„æ ·å¼ã€‚</p>
</li>
<li>
<p>å­˜å‚¨ç”¨æˆ·é€‰æ‹©ï¼šå¦‚æœä½ å¸Œæœ›è®°ä½ç”¨æˆ·çš„æ¨¡å¼é€‰æ‹©ï¼Œå¯ä»¥ä½¿ç”¨æµè§ˆå™¨çš„æœ¬åœ°å­˜å‚¨ï¼ˆå¦‚ localStorageï¼‰æˆ–å…¶ä»–æ–¹å¼å°†ç”¨æˆ·çš„åå¥½ä¿å­˜èµ·æ¥ã€‚è¿™æ ·ï¼Œç”¨æˆ·ä¸‹æ¬¡è®¿é—®ç½‘é¡µæ—¶ï¼Œå¯ä»¥æ ¹æ®ä¹‹å‰çš„é€‰æ‹©è‡ªåŠ¨åº”ç”¨æ­£ç¡®çš„æ¨¡å¼ã€‚</p>
</li>
</ul>
<h2>é¡¹ç›®æ­å»º</h2>
<p>è¿™é‡Œæˆ‘ç”¨çš„æ˜¯ <code>Nuxt3+Tailwindcss</code> æ¥æ­å»ºçš„é¡¹ç›®ï¼Œç”¨ <code>Tailwindcss</code> æ˜¯å› ä¸ºè¿™ä¸ªåº“å¯ä»¥å¸®åŠ©æˆ‘æ–¹ä¾¿çš„å®ç°æ·±è‰²æ¨¡å¼ï¼Œè€Œä¸”æˆ‘ç°åœ¨çš„é¡¹ç›®åŸºæœ¬éƒ½æ˜¯é›†æˆäº† <code>Tailwindcss</code> çš„ï¼Œååˆ†æ¨èå¤§å®¶ä½¿ç”¨å®ƒï¼Œå¦‚æœä½ ä¸äº†è§£å®ƒçš„è¯ï¼Œç°åœ¨äº†è§£ä¸€ä¸‹ä¹Ÿä¸è¿Ÿå“¦ï¼</p>
<ul>
<li>
<p>ç¬¬ä¸€æ­¥ï¼Œåœ¨ <a href="https://nuxt.com/docs/getting-started/installation">Nuxt å®˜ç½‘</a>ï¼Œè·Ÿç€æ–‡æ¡£ä¸‰ä¸‹äº”é™¤äºŒå°±æ–°å»ºå¥½ä¸€ä¸ªé¡¹ç›®</p>
</li>
<li>
<p>ç¬¬äºŒæ­¥ï¼Œç„¶ååœ¨è·Ÿç€ <a href="https://tailwindcss.com/docs/guides/nuxtjs#3">Tailwindcss å®˜ç½‘</a>ï¼Œä¸‰äº”æ­¥å°±èƒ½æŠŠ <code>Tailwindcss</code> é›†æˆåˆ° <code>Nuxt</code> ä¸­</p>
</li>
<li>
<p>ç¬¬ä¸‰æ­¥ï¼Œæˆ‘ä¹ æƒ¯äºåœ¨å‰ç«¯é¡¹ç›®å®‰è£…äº†ä¸€äº›æ’ä»¶æ¥åšè§„èŒƒåŒ–é™åˆ¶ï¼Œæ¯”å¦‚åœ¨è¿™ä¸ªé¡¹ç›®ç”¨åˆ°äº†è¿™äº›æ’ä»¶</p>
<pre><code>"eslint": "^8.40.0",
"eslint-config-prettier": "^8.8.0",
"eslint-plugin-prettier": "^4.2.1",
"eslint-plugin-vue": "^9.13.0",
"prettier": "^2.8.8",
"prettier-plugin-tailwindcss": "^0.2.8",
</code></pre>
</li>
</ul>
<p>æˆ‘æ­å»ºå®Œçš„é¡¹ç›®åœ¨è¿™é‡Œ <a href="https://github.com/yxb94616/nuxt-theme-demo/commit/ea71afb171f72215aba8bb383705038050d897db">Github Repo Commit</a></p>
<h2>å…·ä½“å®ç°</h2>
<h3>tailwind æ·±è‰²æ¨¡å¼é…ç½®</h3>
<p>é¦–å…ˆï¼Œåœ¨ <code>tailwind.config.js</code> é…ç½® <a href="https://tailwindcss.com/docs/dark-mode">Dark Mode</a>ï¼Œç„¶åè‡ªå®šä¹‰ä¸€ä¸ªæ·±è‰²æ¨¡å¼ä¸‹çš„é¢œè‰² (æˆ‘æ·±è‰²æ¨¡å¼ä¸æƒ³è¦çº¯é»‘è‰² ğŸ˜‚)ï¼Œé…ç½®åä»£ç å¦‚ä¸‹ï¼š</p>
<pre><code>/** @type {import('tailwindcss').Config} */
module.exports = {
  darkMode: "class",
  content: [
    "./components/**/*.{js,vue,ts}",
    "./layouts/**/*.vue",
    "./pages/**/*.vue",
    "./plugins/**/*.{js,ts}",
    "./nuxt.config.{js,ts}",
    "./app.vue",
  ],
  theme: {
    extend: {},
    extend: {
      colors: {
        dark: "rgb(18,18,18)",
      },
    },
  },
  plugins: [],
};
</code></pre>
<h3>æ–°å¢æ·±è‰²æ¨¡å¼åˆ‡æ¢ç»„ä»¶</h3>
<p>åœ¨æ ¹ç›®å½•ä¸‹æ–°å¢ <code>components/ThemeToggle.vue</code> ï¼Œæ‰¾ä¸¤ä¸ªå›¾æ ‡åˆ†åˆ«ä»£è¡¨æ·±è‰²å’Œæµ…è‰²æ¨¡å¼ï¼Œå®šä¹‰ä¸€ä¸ªå˜é‡æ¥æ§åˆ¶å›¾æ ‡åœ¨å¯¹åº”æ¨¡å¼ä¸‹çš„æ˜¾éšï¼Œå¹¶ä¸”åœ¨åˆ‡æ¢æ¨¡å¼çš„æ—¶å€™ï¼Œå¾€æ ¹æ ‡ç­¾ <code>&#x3C;html></code> ä¸Šå¢åˆ  <code>class</code>ï¼ŒåŒæ—¶ä¹Ÿåœ¨ <code>localstorage</code> ä¸­å­˜å‚¨ä¸€ä¸‹æ·±è‰²æ¨¡å¼å˜é‡ï¼Œæ–¹ä¾¿åè¾¹æˆ‘ä»¬åšç½‘é¡µåˆ·æ–°ä¿æŒæ·±è‰²æ¨¡å¼åŠŸèƒ½ï¼Œä»£ç å¦‚ä¸‹</p>
<pre><code>&#x3C;template>
  &#x3C;div
    class="absolute right-5 top-3 h-8 w-8 cursor-pointer select-none rounded bg-slate-100 text-gray-500 shadow dark:bg-slate-700 dark:text-gray-400"
    @click="handleToggleTheme"
  >
    &#x3C;span v-show="!dark">
      &#x3C;svg
        t="1684833132212"
        class="icon"
        viewBox="0 0 1024 1024"
        version="1.1"
        xmlns="http://www.w3.org/2000/svg"
        p-id="8388"
        width="32"
        height="32"
      >
        &#x3C;path
          d="M501.48 493.55m-233.03 0a233.03 233.03 0 1 0 466.06 0 233.03 233.03 0 1 0-466.06 0Z"
          fill="#707070"
          p-id="8389"
        >&#x3C;/path>
        &#x3C;path
          d="M501.52 185.35H478.9c-8.28 0-15-6.72-15-15V87.59c0-8.28 6.72-15 15-15h22.62c8.28 0 15 6.72 15 15v82.76c0 8.28-6.72 15-15 15zM281.37 262.76l-16 16c-5.86 5.86-15.36 5.86-21.21 0l-58.52-58.52c-5.86-5.86-5.86-15.36 0-21.21l16-16c5.86-5.86 15.36-5.86 21.21 0l58.52 58.52c5.86 5.86 5.86 15.35 0 21.21zM185.76 478.48v22.62c0 8.28-6.72 15-15 15H88c-8.28 0-15-6.72-15-15v-22.62c0-8.28 6.72-15 15-15h82.76c8.28 0 15 6.72 15 15zM270.69 698.63l16 16c5.86 5.86 5.86 15.36 0 21.21l-58.52 58.52c-5.86 5.86-15.36 5.86-21.21 0l-16-16c-5.86-5.86-5.86-15.36 0-21.21l58.52-58.52c5.85-5.86 15.35-5.86 21.21 0zM486.41 794.24h22.62c8.28 0 15 6.72 15 15V892c0 8.28-6.72 15-15 15h-22.62c-8.28 0-15-6.72-15-15v-82.76c0-8.28 6.72-15 15-15zM706.56 709.31l16-16c5.86-5.86 15.36-5.86 21.21 0l58.52 58.52c5.86 5.86 5.86 15.36 0 21.21l-16 16c-5.86 5.86-15.36 5.86-21.21 0l-58.52-58.52c-5.86-5.85-5.86-15.35 0-21.21zM802.17 493.59v-22.62c0-8.28 6.72-15 15-15h82.76c8.28 0 15 6.72 15 15v22.62c0 8.28-6.72 15-15 15h-82.76c-8.28 0-15-6.72-15-15zM717.24 273.44l-16-16c-5.86-5.86-5.86-15.36 0-21.21l58.52-58.52c5.86-5.86 15.36-5.86 21.21 0l16 16c5.86 5.86 5.86 15.36 0 21.21l-58.52 58.52c-5.86 5.86-15.35 5.86-21.21 0z"
          fill="#707070"
          p-id="8390"
        >&#x3C;/path>
      &#x3C;/svg>
    &#x3C;/span>
    &#x3C;span v-show="dark">
      &#x3C;svg
        t="1684833077751"
        class="icon"
        viewBox="0 0 1024 1024"
        version="1.1"
        xmlns="http://www.w3.org/2000/svg"
        p-id="7162"
        width="32"
        height="32"
      >
        &#x3C;path
          d="M335.22 240.91c0-57.08 10.68-111.66 30.15-161.87-167.51 64.86-286.3 227.51-286.3 417.92 0 247.42 200.58 448 448 448 190.34 0 352.95-118.71 417.85-286.13-50.16 19.42-104.69 30.08-161.71 30.08-247.41 0-447.99-200.57-447.99-448z"
          fill="#dbdbdb"
          p-id="7163"
        >&#x3C;/path>
      &#x3C;/svg>
    &#x3C;/span>
  &#x3C;/div>
&#x3C;/template>

&#x3C;script lang="ts" setup>
const dark = ref(false);

const handleToggleTheme = () => {
  const currentTheme = !dark.value;
  dark.value = currentTheme;
  if (currentTheme) {
    localStorage.setItem("theme", "dark");
    document.documentElement.classList.add("dark");
  } else {
    localStorage.removeItem("theme");
    document.documentElement.classList.remove("dark");
  }
};
&#x3C;/script>
</code></pre>
<h3>æ·»åŠ æµ‹è¯•ä»£ç </h3>
<p>åœ¨ <code>pages/index.vue</code> ä¸­æ·»åŠ æµ‹è¯•ä»£ç ï¼Œå¼•å…¥ <code>ThemeToggle</code> ç»„ä»¶ï¼Œä»£ç å¦‚ä¸‹ï¼š</p>
<pre><code>&#x3C;template>
  &#x3C;div
    class="dark:bg-dark flex h-screen w-screen flex-col items-center justify-center bg-white"
  >
    &#x3C;h1 class="text-6xl font-semibold text-sky-400">2023 ikun&#x3C;/h1>
    &#x3C;p class="mt-4 text-9xl font-bold text-gray-600">åªå› ä½ å¤ªç¾&#x3C;/p>
    &#x3C;ThemeToggle />
  &#x3C;/div>
&#x3C;/template>
</code></pre>
<p>å¯åŠ¨é¡¹ç›®ï¼Œè®¿é—®ç½‘ç«™å°±èƒ½çœ‹åˆ°å¦‚ä¸‹æ•ˆæœ</p>
<p><img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/afda17b016b94f6c869b9ca63ead5b96~tplv-k3u1fbpfcp-watermark.image?" alt="n1.gif"></p>
<h3>æ–°å¢æŒä¹…åŒ–æ·±è‰²æ¨¡å¼åŠŸèƒ½</h3>
<p>èƒ½çœ‹åˆ°å·²ç»å®ç°æ·±è‰²æ¨¡å¼åˆ‡æ¢äº†ï¼Œä½†æ˜¯åœ¨æ·±è‰²æ¨¡å¼ä¸‹åˆ·æ–°ç½‘ç«™çš„æ—¶å€™ï¼Œæ·±è‰²æ¨¡å¼ä¼šä¸¢å¤±ï¼Œ
ä¸Šé¢æåˆ°åœ¨ <code>localstorage</code> ä¸­å­˜å‚¨äº†æ·±è‰²æ¨¡å¼å˜é‡ï¼Œé‚£æ€ä¹ˆå»æ¢å¤æ·±è‰²æ¨¡å¼å‘¢ï¼Œ</p>
<ul>
<li>åœ¨ <code>components/ThemeToggle.vue</code> çš„ <code>onMounted</code> é‡Œè·å– <code>localstorage</code> åšåˆ¤æ–­ï¼Œå¦‚æœæ˜¯æ·±è‰²æ¨¡å¼ï¼Œé‚£å°±åšä¸€ä¸‹å¤„ç†ï¼Œåœ¨ç»„ä»¶é‡Œæ–°å¢ä¸‹é¢è¿™æ®µä»£ç ï¼š</li>
</ul>
<pre><code>onMounted(() => {
  if (localStorage.getItem("theme") === "dark") {
    dark.value = true;
    document.documentElement.classList.add("dark");
  }
});
</code></pre>
<p>ç„¶åæˆ‘ä»¬å†å»æµ‹è¯•ä¸€ä¸‹ï¼Œæ·±è‰²æ¨¡å¼ä¸‹åˆ·æ–°ç½‘ç«™ï¼Œæ•ˆæœå¦‚å›¾</p>
<p><img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/42ec555012444f109344066fedce4826~tplv-k3u1fbpfcp-watermark.image?" alt="n2.gif"></p>
<p>çš„ç¡®æ˜¯æŒä¹…åŒ–äº†æ·±è‰²æ¨¡å¼ï¼Œä½†æ˜¯å‘ç°åˆ·æ–°ç½‘ç«™çš„æ—¶å€™ä¼šé—ªä¸€ä¸‹ï¼Œè¿™æ˜¯ä¸ºä»€ä¹ˆå‘¢ï¼Ÿ</p>
<ul>
<li>è¿™æ˜¯å› ä¸º nuxt æ¡†æ¶ç”Ÿæˆçš„ js ä»£ç æ’å…¥åˆ°äº† DOM æ–‡æ¡£çš„å°¾éƒ¨ï¼Œé€ æˆ js æ‰§è¡Œæ™šäº†ä¸€æ­¥ï¼Œæ‰€ä»¥è·å– <code>localstorage</code> å°±å»¶è¿Ÿäº†ä¸€ç‚¹ç‚¹ï¼Œé€ æˆè®¾ç½®æ·±è‰²æ¨¡å¼çš„æ—¶å€™ä¼šé—ªä¸€ä¸‹</li>
</ul>
<p>æ€ä¹ˆè§£å†³å‘¢ï¼Ÿ</p>
<ul>
<li>é‚£å°±æŠŠè·å– <code>localstorage</code> çš„ä»£ç æ’å…¥åˆ° DOM æ–‡æ¡£å¤´éƒ¨ä¸å°±è¡Œäº†ï¼Œè€Œä¸”å¦‚æœæ²¡æœ‰è®¾ç½® defer æˆ– async å±æ€§ï¼Œ js åŠ è½½è¿˜ä¼šé€ æˆæµè§ˆå™¨å°†é˜»å¡æ¸²æŸ“ï¼Œæ›´åŠ çš„èƒ½é˜²æ­¢é—ªçƒå‡ºç°</li>
</ul>
<h3>è§£å†³é—ªçƒé—®é¢˜</h3>
<ul>
<li>
<p><code>Nuxt</code> æä¾›äº†åœ¨ DOM æ–‡æ¡£å¤´éƒ¨æ’å…¥ä»£ç çš„æ–¹æ³•ï¼Œè¯·é˜…è¯» <a href="https://nuxt.com/docs/api/configuration/nuxt-config#head">Nuxt Configuration Reference</a></p>
</li>
<li>
<p>æ–°å»ºè„šæœ¬æ–‡ä»¶ <code>public/script.js</code>ï¼Œä»£ç å¦‚ä¸‹ï¼ˆè¿™æ®µä»£ç æ¥æºæ˜¯ <a href="https://tailwindcss.com/docs/dark-mode#supporting-system-preference-and-manual-selection">tailwindcss</a>ï¼‰ï¼š</p>
</li>
</ul>
<pre><code>if (
  localStorage.getItem("theme") === "dark" ||
  (!localStorage.getItem("theme") &#x26;&#x26;
    window.matchMedia("(prefers-color-scheme: dark)").matches)
) {
  document.documentElement.classList.add("dark");
} else {
  document.documentElement.classList.remove("dark");
}

</code></pre>
<ul>
<li>ç„¶ååœ¨ <code>nuxt.config.js</code> å¢åŠ é…ç½®ï¼š</li>
</ul>
<pre><code>// https://nuxt.com/docs/api/configuration/nuxt-config
export default defineNuxtConfig({
  app: {
    head: {
      script: ["/script.js"],
    },
  },
  css: ["~/assets/css/main.css"],
  postcss: {
    plugins: {
      tailwindcss: {},
      autoprefixer: {},
    },
  },
  devServer: {
    port: 5005,
  },
});
</code></pre>
<ul>
<li><code>components/ThemeToggle.vue</code> çš„ <code>onMounted</code> è¿˜æ˜¯éœ€è¦çš„ï¼Œéœ€è¦ä¿æŒå˜é‡ä¹ŸåŒæ­¥ï¼Œæ”¹ä¸€ä¸‹</li>
</ul>
<pre><code>onMounted(() => {
  if (localStorage.getItem("theme") === "dark") {
    dark.value = true;
  }
});
</code></pre>
<ul>
<li>è¿™é‡Œè¿˜æœ‰ä¸€ä¸ªå°é—®é¢˜ï¼Œå°±æ˜¯å›¾æ ‡ä¹Ÿä¼šè·Ÿç€é—ªçƒçš„ï¼ŒåŸå› è¿˜æ˜¯jsæ‰§è¡Œé¡ºåºçš„é—®é¢˜ï¼Œæˆ‘çš„è§£å†³åŠæ³•æ˜¯æ”¹ä¸ºä½¿ç”¨ <code>css class</code> æ¥æ§åˆ¶å›¾æ ‡çš„æ˜¾éšï¼Œä¿®æ”¹ <code>components/ThemeToggle.vue</code> ä»£ç å¦‚ä¸‹ï¼š</li>
</ul>
<pre><code>- &#x3C;span v-show="!dark">
+ &#x3C;span class="block dark:hidden">

- &#x3C;span v-show="dark">
+ &#x3C;span class="hidden dark:block">
</code></pre>
<p>okï¼Œç°åœ¨æˆ‘ä»¬å†æ¥åœ¨æ·±è‰²æ¨¡å¼ä¸‹åˆ·æ–°ç½‘é¡µï¼Œä¹ˆå¾—é—®é¢˜ï¼Œè¾¾åˆ°äº†æƒ³è¦çš„æ•ˆæœã€‚</p>
<p>å› ä¸ºåœ¨æ­£å¸¸æ•ˆæœä¸‹å½•åˆ¶ GIF çš„è¯ï¼Œåˆ·æ–°ä¹Ÿçœ‹ä¸å‡ºæ¥ï¼Œæ‰€ä»¥è¿™é‡Œå°±ä¸æ”¾æ•ˆæœå›¾äº†ï¼Œæœ€åçš„ä»£ç åœ¨ä¸Šé¢æˆ‘æåˆ°çš„ <a href="https://github.com/yxb94616/nuxt-theme-demo">github ä»“åº“</a>ã€‚</p>
<blockquote>
<p>å¦‚æœ‰é”™è¯¯ï¼Œæ¬¢è¿æŒ‡æ­£</p>
</blockquote>
</div></article></main><div class="layout_backToHome__9sjx_"><a href="/">â† Back to home</a></div></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"postData":{"id":"nuxt3-tailwindcss-dark","contentHtml":"\u003cp\u003eæœ€è¿‘æ˜é‡‘ç½‘ç«™ä¸Šçº¿äº†æ·±è‰²æ¨¡å¼ï¼Œçœ‹ jym éƒ½æŒºé’çæ·±è‰²æ¨¡å¼ï¼Œæƒ³ç€æˆ‘ä¹‹å‰ä¹Ÿå®ç°è¿‡æ·±è‰²æ¨¡å¼çš„åˆ‡æ¢ï¼Œä¸è¿‡æ˜¯åœ¨ä½¿ç”¨ \u003ccode\u003eVUE SPA\u003c/code\u003e åšçš„ç½‘ç«™ä¸Šå®ç°çš„ï¼Œè€Œæ˜é‡‘ç½‘ç«™ä½¿ç”¨çš„æ˜¯ \u003ccode\u003eVUE SSR\u003c/code\u003e æ¡†æ¶ \u003ccode\u003eNuxt\u003c/code\u003eï¼Œæˆ‘æƒ³ç€å®ç°åŸç†éƒ½æ˜¯å¤§åŒå°å¼‚ï¼Œé‚£æˆ‘ä»¬ä¹Ÿä½¿ç”¨ \u003ccode\u003eNuxt\u003c/code\u003e æ¥å®ç°ä¸€ä¸‹æ·±è‰²æ¨¡å¼çš„åˆ‡æ¢è¯•è¯•ã€‚\u003c/p\u003e\n\u003ch2\u003eæ·±è‰²æ¨¡å¼åˆ‡æ¢åŸç†ä¹‹ä¸€\u003c/h2\u003e\n\u003cp\u003eä¸ºä»€ä¹ˆæ˜¯åŸç†ä¹‹ä¸€ï¼Œæ˜¯å› ä¸ºå®ç°æ·±è‰²æ¨¡å¼æœ‰å¤šç§æ–¹å¼ï¼Œæˆ‘å°è¯•çš„æ˜¯é€šè¿‡ \u003ccode\u003ecss class\u003c/code\u003e åˆ‡æ¢æ¥æ§åˆ¶æ·±è‰²æ¨¡å¼åˆ‡æ¢ã€‚\nå¤§æ¦‚æ˜¯è¿™ä¹ˆä¸ªåŸç†ï¼š\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003cp\u003eå®šä¹‰ä¸¤å¥—æ ·å¼ï¼šä½ éœ€è¦ä¸ºæ·±è‰²æ¨¡å¼å’Œæµ…è‰²æ¨¡å¼åˆ†åˆ«å®šä¹‰ä¸¤å¥—æ ·å¼\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eåˆ‡æ¢ CSS ç±»ï¼šé€šè¿‡ JS åŠ¨æ€åœ°åˆ‡æ¢ç‰¹å®šçš„ CSS ç±»\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eCSS æ ·å¼ä¼˜å…ˆçº§ï¼šç¡®ä¿åœ¨ CSS ä¸­æ­£ç¡®è®¾ç½®æ·±è‰²æ¨¡å¼å’Œæµ…è‰²æ¨¡å¼çš„æ ·å¼ä¼˜å…ˆçº§ã€‚ä¸ºäº†ç¡®ä¿æ ·å¼æ­£ç¡®åº”ç”¨ï¼Œä½ å¯ä»¥ä½¿ç”¨åˆé€‚çš„ CSS é€‰æ‹©å™¨ï¼Œä¾‹å¦‚ä½¿ç”¨ .dark æˆ– .light ç±»æ¥é€‰æ‹©å¯¹åº”çš„æ ·å¼ã€‚\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eå­˜å‚¨ç”¨æˆ·é€‰æ‹©ï¼šå¦‚æœä½ å¸Œæœ›è®°ä½ç”¨æˆ·çš„æ¨¡å¼é€‰æ‹©ï¼Œå¯ä»¥ä½¿ç”¨æµè§ˆå™¨çš„æœ¬åœ°å­˜å‚¨ï¼ˆå¦‚ localStorageï¼‰æˆ–å…¶ä»–æ–¹å¼å°†ç”¨æˆ·çš„åå¥½ä¿å­˜èµ·æ¥ã€‚è¿™æ ·ï¼Œç”¨æˆ·ä¸‹æ¬¡è®¿é—®ç½‘é¡µæ—¶ï¼Œå¯ä»¥æ ¹æ®ä¹‹å‰çš„é€‰æ‹©è‡ªåŠ¨åº”ç”¨æ­£ç¡®çš„æ¨¡å¼ã€‚\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2\u003eé¡¹ç›®æ­å»º\u003c/h2\u003e\n\u003cp\u003eè¿™é‡Œæˆ‘ç”¨çš„æ˜¯ \u003ccode\u003eNuxt3+Tailwindcss\u003c/code\u003e æ¥æ­å»ºçš„é¡¹ç›®ï¼Œç”¨ \u003ccode\u003eTailwindcss\u003c/code\u003e æ˜¯å› ä¸ºè¿™ä¸ªåº“å¯ä»¥å¸®åŠ©æˆ‘æ–¹ä¾¿çš„å®ç°æ·±è‰²æ¨¡å¼ï¼Œè€Œä¸”æˆ‘ç°åœ¨çš„é¡¹ç›®åŸºæœ¬éƒ½æ˜¯é›†æˆäº† \u003ccode\u003eTailwindcss\u003c/code\u003e çš„ï¼Œååˆ†æ¨èå¤§å®¶ä½¿ç”¨å®ƒï¼Œå¦‚æœä½ ä¸äº†è§£å®ƒçš„è¯ï¼Œç°åœ¨äº†è§£ä¸€ä¸‹ä¹Ÿä¸è¿Ÿå“¦ï¼\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003cp\u003eç¬¬ä¸€æ­¥ï¼Œåœ¨ \u003ca href=\"https://nuxt.com/docs/getting-started/installation\"\u003eNuxt å®˜ç½‘\u003c/a\u003eï¼Œè·Ÿç€æ–‡æ¡£ä¸‰ä¸‹äº”é™¤äºŒå°±æ–°å»ºå¥½ä¸€ä¸ªé¡¹ç›®\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eç¬¬äºŒæ­¥ï¼Œç„¶ååœ¨è·Ÿç€ \u003ca href=\"https://tailwindcss.com/docs/guides/nuxtjs#3\"\u003eTailwindcss å®˜ç½‘\u003c/a\u003eï¼Œä¸‰äº”æ­¥å°±èƒ½æŠŠ \u003ccode\u003eTailwindcss\u003c/code\u003e é›†æˆåˆ° \u003ccode\u003eNuxt\u003c/code\u003e ä¸­\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eç¬¬ä¸‰æ­¥ï¼Œæˆ‘ä¹ æƒ¯äºåœ¨å‰ç«¯é¡¹ç›®å®‰è£…äº†ä¸€äº›æ’ä»¶æ¥åšè§„èŒƒåŒ–é™åˆ¶ï¼Œæ¯”å¦‚åœ¨è¿™ä¸ªé¡¹ç›®ç”¨åˆ°äº†è¿™äº›æ’ä»¶\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003e\"eslint\": \"^8.40.0\",\n\"eslint-config-prettier\": \"^8.8.0\",\n\"eslint-plugin-prettier\": \"^4.2.1\",\n\"eslint-plugin-vue\": \"^9.13.0\",\n\"prettier\": \"^2.8.8\",\n\"prettier-plugin-tailwindcss\": \"^0.2.8\",\n\u003c/code\u003e\u003c/pre\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eæˆ‘æ­å»ºå®Œçš„é¡¹ç›®åœ¨è¿™é‡Œ \u003ca href=\"https://github.com/yxb94616/nuxt-theme-demo/commit/ea71afb171f72215aba8bb383705038050d897db\"\u003eGithub Repo Commit\u003c/a\u003e\u003c/p\u003e\n\u003ch2\u003eå…·ä½“å®ç°\u003c/h2\u003e\n\u003ch3\u003etailwind æ·±è‰²æ¨¡å¼é…ç½®\u003c/h3\u003e\n\u003cp\u003eé¦–å…ˆï¼Œåœ¨ \u003ccode\u003etailwind.config.js\u003c/code\u003e é…ç½® \u003ca href=\"https://tailwindcss.com/docs/dark-mode\"\u003eDark Mode\u003c/a\u003eï¼Œç„¶åè‡ªå®šä¹‰ä¸€ä¸ªæ·±è‰²æ¨¡å¼ä¸‹çš„é¢œè‰² (æˆ‘æ·±è‰²æ¨¡å¼ä¸æƒ³è¦çº¯é»‘è‰² ğŸ˜‚)ï¼Œé…ç½®åä»£ç å¦‚ä¸‹ï¼š\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003e/** @type {import('tailwindcss').Config} */\nmodule.exports = {\n  darkMode: \"class\",\n  content: [\n    \"./components/**/*.{js,vue,ts}\",\n    \"./layouts/**/*.vue\",\n    \"./pages/**/*.vue\",\n    \"./plugins/**/*.{js,ts}\",\n    \"./nuxt.config.{js,ts}\",\n    \"./app.vue\",\n  ],\n  theme: {\n    extend: {},\n    extend: {\n      colors: {\n        dark: \"rgb(18,18,18)\",\n      },\n    },\n  },\n  plugins: [],\n};\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch3\u003eæ–°å¢æ·±è‰²æ¨¡å¼åˆ‡æ¢ç»„ä»¶\u003c/h3\u003e\n\u003cp\u003eåœ¨æ ¹ç›®å½•ä¸‹æ–°å¢ \u003ccode\u003ecomponents/ThemeToggle.vue\u003c/code\u003e ï¼Œæ‰¾ä¸¤ä¸ªå›¾æ ‡åˆ†åˆ«ä»£è¡¨æ·±è‰²å’Œæµ…è‰²æ¨¡å¼ï¼Œå®šä¹‰ä¸€ä¸ªå˜é‡æ¥æ§åˆ¶å›¾æ ‡åœ¨å¯¹åº”æ¨¡å¼ä¸‹çš„æ˜¾éšï¼Œå¹¶ä¸”åœ¨åˆ‡æ¢æ¨¡å¼çš„æ—¶å€™ï¼Œå¾€æ ¹æ ‡ç­¾ \u003ccode\u003e\u0026#x3C;html\u003e\u003c/code\u003e ä¸Šå¢åˆ  \u003ccode\u003eclass\u003c/code\u003eï¼ŒåŒæ—¶ä¹Ÿåœ¨ \u003ccode\u003elocalstorage\u003c/code\u003e ä¸­å­˜å‚¨ä¸€ä¸‹æ·±è‰²æ¨¡å¼å˜é‡ï¼Œæ–¹ä¾¿åè¾¹æˆ‘ä»¬åšç½‘é¡µåˆ·æ–°ä¿æŒæ·±è‰²æ¨¡å¼åŠŸèƒ½ï¼Œä»£ç å¦‚ä¸‹\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003e\u0026#x3C;template\u003e\n  \u0026#x3C;div\n    class=\"absolute right-5 top-3 h-8 w-8 cursor-pointer select-none rounded bg-slate-100 text-gray-500 shadow dark:bg-slate-700 dark:text-gray-400\"\n    @click=\"handleToggleTheme\"\n  \u003e\n    \u0026#x3C;span v-show=\"!dark\"\u003e\n      \u0026#x3C;svg\n        t=\"1684833132212\"\n        class=\"icon\"\n        viewBox=\"0 0 1024 1024\"\n        version=\"1.1\"\n        xmlns=\"http://www.w3.org/2000/svg\"\n        p-id=\"8388\"\n        width=\"32\"\n        height=\"32\"\n      \u003e\n        \u0026#x3C;path\n          d=\"M501.48 493.55m-233.03 0a233.03 233.03 0 1 0 466.06 0 233.03 233.03 0 1 0-466.06 0Z\"\n          fill=\"#707070\"\n          p-id=\"8389\"\n        \u003e\u0026#x3C;/path\u003e\n        \u0026#x3C;path\n          d=\"M501.52 185.35H478.9c-8.28 0-15-6.72-15-15V87.59c0-8.28 6.72-15 15-15h22.62c8.28 0 15 6.72 15 15v82.76c0 8.28-6.72 15-15 15zM281.37 262.76l-16 16c-5.86 5.86-15.36 5.86-21.21 0l-58.52-58.52c-5.86-5.86-5.86-15.36 0-21.21l16-16c5.86-5.86 15.36-5.86 21.21 0l58.52 58.52c5.86 5.86 5.86 15.35 0 21.21zM185.76 478.48v22.62c0 8.28-6.72 15-15 15H88c-8.28 0-15-6.72-15-15v-22.62c0-8.28 6.72-15 15-15h82.76c8.28 0 15 6.72 15 15zM270.69 698.63l16 16c5.86 5.86 5.86 15.36 0 21.21l-58.52 58.52c-5.86 5.86-15.36 5.86-21.21 0l-16-16c-5.86-5.86-5.86-15.36 0-21.21l58.52-58.52c5.85-5.86 15.35-5.86 21.21 0zM486.41 794.24h22.62c8.28 0 15 6.72 15 15V892c0 8.28-6.72 15-15 15h-22.62c-8.28 0-15-6.72-15-15v-82.76c0-8.28 6.72-15 15-15zM706.56 709.31l16-16c5.86-5.86 15.36-5.86 21.21 0l58.52 58.52c5.86 5.86 5.86 15.36 0 21.21l-16 16c-5.86 5.86-15.36 5.86-21.21 0l-58.52-58.52c-5.86-5.85-5.86-15.35 0-21.21zM802.17 493.59v-22.62c0-8.28 6.72-15 15-15h82.76c8.28 0 15 6.72 15 15v22.62c0 8.28-6.72 15-15 15h-82.76c-8.28 0-15-6.72-15-15zM717.24 273.44l-16-16c-5.86-5.86-5.86-15.36 0-21.21l58.52-58.52c5.86-5.86 15.36-5.86 21.21 0l16 16c5.86 5.86 5.86 15.36 0 21.21l-58.52 58.52c-5.86 5.86-15.35 5.86-21.21 0z\"\n          fill=\"#707070\"\n          p-id=\"8390\"\n        \u003e\u0026#x3C;/path\u003e\n      \u0026#x3C;/svg\u003e\n    \u0026#x3C;/span\u003e\n    \u0026#x3C;span v-show=\"dark\"\u003e\n      \u0026#x3C;svg\n        t=\"1684833077751\"\n        class=\"icon\"\n        viewBox=\"0 0 1024 1024\"\n        version=\"1.1\"\n        xmlns=\"http://www.w3.org/2000/svg\"\n        p-id=\"7162\"\n        width=\"32\"\n        height=\"32\"\n      \u003e\n        \u0026#x3C;path\n          d=\"M335.22 240.91c0-57.08 10.68-111.66 30.15-161.87-167.51 64.86-286.3 227.51-286.3 417.92 0 247.42 200.58 448 448 448 190.34 0 352.95-118.71 417.85-286.13-50.16 19.42-104.69 30.08-161.71 30.08-247.41 0-447.99-200.57-447.99-448z\"\n          fill=\"#dbdbdb\"\n          p-id=\"7163\"\n        \u003e\u0026#x3C;/path\u003e\n      \u0026#x3C;/svg\u003e\n    \u0026#x3C;/span\u003e\n  \u0026#x3C;/div\u003e\n\u0026#x3C;/template\u003e\n\n\u0026#x3C;script lang=\"ts\" setup\u003e\nconst dark = ref(false);\n\nconst handleToggleTheme = () =\u003e {\n  const currentTheme = !dark.value;\n  dark.value = currentTheme;\n  if (currentTheme) {\n    localStorage.setItem(\"theme\", \"dark\");\n    document.documentElement.classList.add(\"dark\");\n  } else {\n    localStorage.removeItem(\"theme\");\n    document.documentElement.classList.remove(\"dark\");\n  }\n};\n\u0026#x3C;/script\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch3\u003eæ·»åŠ æµ‹è¯•ä»£ç \u003c/h3\u003e\n\u003cp\u003eåœ¨ \u003ccode\u003epages/index.vue\u003c/code\u003e ä¸­æ·»åŠ æµ‹è¯•ä»£ç ï¼Œå¼•å…¥ \u003ccode\u003eThemeToggle\u003c/code\u003e ç»„ä»¶ï¼Œä»£ç å¦‚ä¸‹ï¼š\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003e\u0026#x3C;template\u003e\n  \u0026#x3C;div\n    class=\"dark:bg-dark flex h-screen w-screen flex-col items-center justify-center bg-white\"\n  \u003e\n    \u0026#x3C;h1 class=\"text-6xl font-semibold text-sky-400\"\u003e2023 ikun\u0026#x3C;/h1\u003e\n    \u0026#x3C;p class=\"mt-4 text-9xl font-bold text-gray-600\"\u003eåªå› ä½ å¤ªç¾\u0026#x3C;/p\u003e\n    \u0026#x3C;ThemeToggle /\u003e\n  \u0026#x3C;/div\u003e\n\u0026#x3C;/template\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eå¯åŠ¨é¡¹ç›®ï¼Œè®¿é—®ç½‘ç«™å°±èƒ½çœ‹åˆ°å¦‚ä¸‹æ•ˆæœ\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/afda17b016b94f6c869b9ca63ead5b96~tplv-k3u1fbpfcp-watermark.image?\" alt=\"n1.gif\"\u003e\u003c/p\u003e\n\u003ch3\u003eæ–°å¢æŒä¹…åŒ–æ·±è‰²æ¨¡å¼åŠŸèƒ½\u003c/h3\u003e\n\u003cp\u003eèƒ½çœ‹åˆ°å·²ç»å®ç°æ·±è‰²æ¨¡å¼åˆ‡æ¢äº†ï¼Œä½†æ˜¯åœ¨æ·±è‰²æ¨¡å¼ä¸‹åˆ·æ–°ç½‘ç«™çš„æ—¶å€™ï¼Œæ·±è‰²æ¨¡å¼ä¼šä¸¢å¤±ï¼Œ\nä¸Šé¢æåˆ°åœ¨ \u003ccode\u003elocalstorage\u003c/code\u003e ä¸­å­˜å‚¨äº†æ·±è‰²æ¨¡å¼å˜é‡ï¼Œé‚£æ€ä¹ˆå»æ¢å¤æ·±è‰²æ¨¡å¼å‘¢ï¼Œ\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eåœ¨ \u003ccode\u003ecomponents/ThemeToggle.vue\u003c/code\u003e çš„ \u003ccode\u003eonMounted\u003c/code\u003e é‡Œè·å– \u003ccode\u003elocalstorage\u003c/code\u003e åšåˆ¤æ–­ï¼Œå¦‚æœæ˜¯æ·±è‰²æ¨¡å¼ï¼Œé‚£å°±åšä¸€ä¸‹å¤„ç†ï¼Œåœ¨ç»„ä»¶é‡Œæ–°å¢ä¸‹é¢è¿™æ®µä»£ç ï¼š\u003c/li\u003e\n\u003c/ul\u003e\n\u003cpre\u003e\u003ccode\u003eonMounted(() =\u003e {\n  if (localStorage.getItem(\"theme\") === \"dark\") {\n    dark.value = true;\n    document.documentElement.classList.add(\"dark\");\n  }\n});\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eç„¶åæˆ‘ä»¬å†å»æµ‹è¯•ä¸€ä¸‹ï¼Œæ·±è‰²æ¨¡å¼ä¸‹åˆ·æ–°ç½‘ç«™ï¼Œæ•ˆæœå¦‚å›¾\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/42ec555012444f109344066fedce4826~tplv-k3u1fbpfcp-watermark.image?\" alt=\"n2.gif\"\u003e\u003c/p\u003e\n\u003cp\u003eçš„ç¡®æ˜¯æŒä¹…åŒ–äº†æ·±è‰²æ¨¡å¼ï¼Œä½†æ˜¯å‘ç°åˆ·æ–°ç½‘ç«™çš„æ—¶å€™ä¼šé—ªä¸€ä¸‹ï¼Œè¿™æ˜¯ä¸ºä»€ä¹ˆå‘¢ï¼Ÿ\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eè¿™æ˜¯å› ä¸º nuxt æ¡†æ¶ç”Ÿæˆçš„ js ä»£ç æ’å…¥åˆ°äº† DOM æ–‡æ¡£çš„å°¾éƒ¨ï¼Œé€ æˆ js æ‰§è¡Œæ™šäº†ä¸€æ­¥ï¼Œæ‰€ä»¥è·å– \u003ccode\u003elocalstorage\u003c/code\u003e å°±å»¶è¿Ÿäº†ä¸€ç‚¹ç‚¹ï¼Œé€ æˆè®¾ç½®æ·±è‰²æ¨¡å¼çš„æ—¶å€™ä¼šé—ªä¸€ä¸‹\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eæ€ä¹ˆè§£å†³å‘¢ï¼Ÿ\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eé‚£å°±æŠŠè·å– \u003ccode\u003elocalstorage\u003c/code\u003e çš„ä»£ç æ’å…¥åˆ° DOM æ–‡æ¡£å¤´éƒ¨ä¸å°±è¡Œäº†ï¼Œè€Œä¸”å¦‚æœæ²¡æœ‰è®¾ç½® defer æˆ– async å±æ€§ï¼Œ js åŠ è½½è¿˜ä¼šé€ æˆæµè§ˆå™¨å°†é˜»å¡æ¸²æŸ“ï¼Œæ›´åŠ çš„èƒ½é˜²æ­¢é—ªçƒå‡ºç°\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3\u003eè§£å†³é—ªçƒé—®é¢˜\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003cp\u003e\u003ccode\u003eNuxt\u003c/code\u003e æä¾›äº†åœ¨ DOM æ–‡æ¡£å¤´éƒ¨æ’å…¥ä»£ç çš„æ–¹æ³•ï¼Œè¯·é˜…è¯» \u003ca href=\"https://nuxt.com/docs/api/configuration/nuxt-config#head\"\u003eNuxt Configuration Reference\u003c/a\u003e\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eæ–°å»ºè„šæœ¬æ–‡ä»¶ \u003ccode\u003epublic/script.js\u003c/code\u003eï¼Œä»£ç å¦‚ä¸‹ï¼ˆè¿™æ®µä»£ç æ¥æºæ˜¯ \u003ca href=\"https://tailwindcss.com/docs/dark-mode#supporting-system-preference-and-manual-selection\"\u003etailwindcss\u003c/a\u003eï¼‰ï¼š\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003cpre\u003e\u003ccode\u003eif (\n  localStorage.getItem(\"theme\") === \"dark\" ||\n  (!localStorage.getItem(\"theme\") \u0026#x26;\u0026#x26;\n    window.matchMedia(\"(prefers-color-scheme: dark)\").matches)\n) {\n  document.documentElement.classList.add(\"dark\");\n} else {\n  document.documentElement.classList.remove(\"dark\");\n}\n\n\u003c/code\u003e\u003c/pre\u003e\n\u003cul\u003e\n\u003cli\u003eç„¶ååœ¨ \u003ccode\u003enuxt.config.js\u003c/code\u003e å¢åŠ é…ç½®ï¼š\u003c/li\u003e\n\u003c/ul\u003e\n\u003cpre\u003e\u003ccode\u003e// https://nuxt.com/docs/api/configuration/nuxt-config\nexport default defineNuxtConfig({\n  app: {\n    head: {\n      script: [\"/script.js\"],\n    },\n  },\n  css: [\"~/assets/css/main.css\"],\n  postcss: {\n    plugins: {\n      tailwindcss: {},\n      autoprefixer: {},\n    },\n  },\n  devServer: {\n    port: 5005,\n  },\n});\n\u003c/code\u003e\u003c/pre\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ccode\u003ecomponents/ThemeToggle.vue\u003c/code\u003e çš„ \u003ccode\u003eonMounted\u003c/code\u003e è¿˜æ˜¯éœ€è¦çš„ï¼Œéœ€è¦ä¿æŒå˜é‡ä¹ŸåŒæ­¥ï¼Œæ”¹ä¸€ä¸‹\u003c/li\u003e\n\u003c/ul\u003e\n\u003cpre\u003e\u003ccode\u003eonMounted(() =\u003e {\n  if (localStorage.getItem(\"theme\") === \"dark\") {\n    dark.value = true;\n  }\n});\n\u003c/code\u003e\u003c/pre\u003e\n\u003cul\u003e\n\u003cli\u003eè¿™é‡Œè¿˜æœ‰ä¸€ä¸ªå°é—®é¢˜ï¼Œå°±æ˜¯å›¾æ ‡ä¹Ÿä¼šè·Ÿç€é—ªçƒçš„ï¼ŒåŸå› è¿˜æ˜¯jsæ‰§è¡Œé¡ºåºçš„é—®é¢˜ï¼Œæˆ‘çš„è§£å†³åŠæ³•æ˜¯æ”¹ä¸ºä½¿ç”¨ \u003ccode\u003ecss class\u003c/code\u003e æ¥æ§åˆ¶å›¾æ ‡çš„æ˜¾éšï¼Œä¿®æ”¹ \u003ccode\u003ecomponents/ThemeToggle.vue\u003c/code\u003e ä»£ç å¦‚ä¸‹ï¼š\u003c/li\u003e\n\u003c/ul\u003e\n\u003cpre\u003e\u003ccode\u003e- \u0026#x3C;span v-show=\"!dark\"\u003e\n+ \u0026#x3C;span class=\"block dark:hidden\"\u003e\n\n- \u0026#x3C;span v-show=\"dark\"\u003e\n+ \u0026#x3C;span class=\"hidden dark:block\"\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eokï¼Œç°åœ¨æˆ‘ä»¬å†æ¥åœ¨æ·±è‰²æ¨¡å¼ä¸‹åˆ·æ–°ç½‘é¡µï¼Œä¹ˆå¾—é—®é¢˜ï¼Œè¾¾åˆ°äº†æƒ³è¦çš„æ•ˆæœã€‚\u003c/p\u003e\n\u003cp\u003eå› ä¸ºåœ¨æ­£å¸¸æ•ˆæœä¸‹å½•åˆ¶ GIF çš„è¯ï¼Œåˆ·æ–°ä¹Ÿçœ‹ä¸å‡ºæ¥ï¼Œæ‰€ä»¥è¿™é‡Œå°±ä¸æ”¾æ•ˆæœå›¾äº†ï¼Œæœ€åçš„ä»£ç åœ¨ä¸Šé¢æˆ‘æåˆ°çš„ \u003ca href=\"https://github.com/yxb94616/nuxt-theme-demo\"\u003egithub ä»“åº“\u003c/a\u003eã€‚\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cp\u003eå¦‚æœ‰é”™è¯¯ï¼Œæ¬¢è¿æŒ‡æ­£\u003c/p\u003e\n\u003c/blockquote\u003e\n","title":"Nuxt3+Tailwindcss implements dark mode switching","date":"2023-05-24"}},"__N_SSG":true},"page":"/posts/[id]","query":{"id":"nuxt3-tailwindcss-dark"},"buildId":"2JG6mlIUNmPBlo9NKBYU6","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>